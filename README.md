![napcat-plugin-checkin](https://count.getloli.com/@MY-Final_napcat-plugin-checkin?name=napcat-plugin-checkin&theme=minecraft&padding=6&offset=0&align=top&scale=1&pixelated=1&darkmode=auto)

# NapCat ç­¾åˆ°æ’ä»¶

[![Version](https://img.shields.io/github/v/release/MY-Final/napcat-plugin-checkin)](https://github.com/MY-Final/napcat-plugin-checkin/releases)
[![License](https://img.shields.io/github/license/MY-Final/napcat-plugin-checkin)](LICENSE)

ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ QQ æœºå™¨äººç­¾åˆ°æ’ä»¶ï¼Œæ”¯æŒæ¯æ—¥ç­¾åˆ°ã€ç§¯åˆ†ç³»ç»Ÿã€è¿ç»­ç­¾åˆ°åŠ æˆã€Canvas ç²¾ç¾å¡ç‰‡ã€æ’è¡Œæ¦œã€æ´»è·ƒç»Ÿè®¡ã€ç§¯åˆ†å…‘æ¢ API ç­‰ç‰¹æ€§ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ“ ç­¾åˆ°åŠŸèƒ½
- **æ¯æ—¥ç­¾åˆ°** - å‘é€ `ç­¾åˆ°` å³å¯ç­¾åˆ°ï¼Œè·å¾—éšæœºç§¯åˆ† 10-50
- **è¿ç»­ç­¾åˆ°åŠ æˆ** - è¿ç»­ç­¾åˆ°æ¯å¤©é¢å¤– +2 ç§¯åˆ†ï¼Œä¸Šé™ +20
- **å‘¨æœ«åŠ æˆ** - æ”¯æŒå‘¨æœ«é¢å¤–ç§¯åˆ†åŠ æˆ
- **Canvas å¡ç‰‡** - ç²¾ç¾çš„ç­¾åˆ°ç»“æœå±•ç¤ºå¡ç‰‡ï¼ˆéœ€å®‰è£… puppeteer æ’ä»¶ï¼‰
- **è‡ªå®šä¹‰æ¨¡æ¿** - æ”¯æŒ HTML æ¨¡æ¿è‡ªå®šä¹‰ç­¾åˆ°å¡ç‰‡æ ·å¼
- **ç­¾åˆ°å†·å´** - æ¯ä¸ªç¾¤ç‹¬ç«‹å†·å´æ—¶é—´ï¼ˆé»˜è®¤ 60 ç§’ï¼‰

### ğŸ’ ç§¯åˆ†ç³»ç»Ÿ
- **ç§¯åˆ†æŸ¥è¯¢** - `#cmd æˆ‘çš„ç§¯åˆ†` æŸ¥çœ‹ä¸ªäººæ•°æ®
- **å…¨æœç§¯åˆ†æ’è¡Œ** - `#cmd æ€»æ’è¡Œ` æŸ¥çœ‹å…¨æœç§¯åˆ† TOP100
- **å…¨æœæ´»è·ƒæ’è¡Œ** - `#cmd æ´»è·ƒæ’è¡Œ` æŸ¥çœ‹ä½¿ç”¨å¤©æ•°æ’è¡Œï¼ˆè¯†åˆ«å¿ å®ç”¨æˆ·ï¼‰
- **ç¾¤å†…æ’è¡Œ** - `#cmd ç§¯åˆ†æ’è¡Œ` æŸ¥çœ‹ç¾¤å†… TOP10
- **ç­¾åˆ°å¤©æ•°** - ç´¯è®¡ç­¾åˆ°å¤©æ•°å’Œæ´»è·ƒå¤©æ•°ç»Ÿè®¡

### ğŸ”§ ç¾¤ç®¡ç†
- **å¼€å…³ç­¾åˆ°** - ç¾¤ä¸»/ç®¡ç†å‘˜å¯ `#cmd å¼€å¯ç­¾åˆ°` / `#cmd å…³é—­ç­¾åˆ°`
- **ç¾¤éš”ç¦»** - å„ç¾¤ç­¾åˆ°æ•°æ®ç‹¬ç«‹ç»Ÿè®¡
- **çŠ¶æ€æŒä¹…åŒ–** - ç¾¤è®¾ç½®è‡ªåŠ¨ä¿å­˜

### ğŸ¨ WebUI ç®¡ç†é¢æ¿
- **ä»ªè¡¨ç›˜** - æ’ä»¶çŠ¶æ€æ¦‚è§ˆå’Œç»Ÿè®¡æ•°æ®
- **ä½¿ç”¨è¯´æ˜** - è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’Œæ‰©å±•å¼€å‘æ–‡æ¡£
- **æ’ä»¶é…ç½®** - å¯è§†åŒ–é…ç½®æ‰€æœ‰å‚æ•°
- **ç¾¤ç®¡ç†** - æŸ¥çœ‹ç¾¤å¤´åƒã€ç®¡ç†å„ç¾¤çš„ç­¾åˆ°çŠ¶æ€
- **ç§¯åˆ†æ’è¡Œ** - å…¨æœç§¯åˆ†æ’è¡Œæ¦œï¼Œç‚¹å‡»å¤´åƒæŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…
- **æ´»è·ƒæ’è¡Œ** - å…¨æœæ´»è·ƒæ’è¡Œæ¦œï¼Œè¯†åˆ«å¿ å®ç”¨æˆ·
- **åˆ†ç¾¤æ’è¡Œ** - å„ç¾¤ç­¾åˆ°æ’è¡Œï¼Œå¡ç‰‡å¼ç¾¤é€‰æ‹©å™¨
- **ç­¾åˆ°æ—¥å¿—** - å®Œæ•´çš„ç­¾åˆ°è®°å½•æŸ¥è¯¢ã€ç»Ÿè®¡ã€è¶‹åŠ¿åˆ†æ
- **æ¨¡æ¿ç¼–è¾‘** - å¯è§†åŒ–ç¼–è¾‘ç­¾åˆ°å¡ç‰‡ HTML æ¨¡æ¿ï¼Œå®æ—¶é¢„è§ˆ
- **æ¥å£æ–‡æ¡£** - å®Œæ•´çš„ API æ¥å£æ–‡æ¡£

### ğŸ“Š ç­¾åˆ°æ—¥å¿—ç³»ç»Ÿ
- **å®Œæ•´è®°å½•** - è®°å½•æ¯æ¬¡ç­¾åˆ°çš„è¯¦ç»†ä¿¡æ¯ï¼ˆç§¯åˆ†ã€æ’åã€åŠ æˆç­‰ï¼‰
- **çµæ´»æŸ¥è¯¢** - æ”¯æŒæŒ‰ç”¨æˆ·ã€ç¾¤ç»„ã€æ—¶é—´èŒƒå›´ã€çŠ¶æ€ç­›é€‰
- **æ•°æ®ç»Ÿè®¡** - ç»Ÿè®¡æˆåŠŸç‡ã€æ€»ç§¯åˆ†ã€ç”¨æˆ·æ•°ã€ç¾¤ç»„æ•°
- **è¶‹åŠ¿åˆ†æ** - æŸ¥çœ‹è¿‘30å¤©ç­¾åˆ°è¶‹åŠ¿å›¾è¡¨
- **ç¾¤é…ç½®** - æ”¯æŒæŒ‰ç¾¤ç‹¬ç«‹å¼€å…³æ—¥å¿—åŠŸèƒ½
- **è‡ªåŠ¨æ¸…ç†** - è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ—¥å¿—ï¼ˆå¯é…ç½®ä¿ç•™å¤©æ•°ï¼‰
- **æ‰‹åŠ¨æ¸…ç†** - æ”¯æŒæ‰‹åŠ¨æ¸…ç†æŒ‡å®šå¤©æ•°å‰çš„æ—¥å¿—

### ğŸ”Œ ç§¯åˆ†ç®¡ç† API
æä¾›å®Œæ•´çš„ RESTful API ä¾›å…¶ä»–æ’ä»¶é›†æˆï¼š
- **æŸ¥è¯¢ç§¯åˆ†** - è·å–ç”¨æˆ·åœ¨ç¾¤å†…çš„å½“å‰ç§¯åˆ†
- **ä¿®æ”¹ç§¯åˆ†** - å¢åŠ /å‡å°‘ç§¯åˆ†ï¼ˆç”¨äºå…‘æ¢å¥–åŠ±ï¼‰
- **ç§¯åˆ†å†å²** - æŸ¥çœ‹ç§¯åˆ†å˜æ›´è®°å½•
- **é‡ç½®ç§¯åˆ†** - å°†ç§¯åˆ†æ¸…é›¶ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰

### ğŸ›¡ï¸ æ•°æ®ä¿æŠ¤
- **è‡ªåŠ¨å¤‡ä»½** - æ¯æ¬¡ä¿å­˜æ•°æ®å‰è‡ªåŠ¨åˆ›å»ºå¤‡ä»½
- **è‡ªåŠ¨æ¢å¤** - æ’ä»¶å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æŸ¥å¹¶ä¿®å¤æŸåçš„æ•°æ®
- **æ›´æ–°ä¿æŠ¤** - æ›´æ–°æ’ä»¶æ—¶ä¸ä¼šä¸¢å¤±å†å²æ•°æ®

## ğŸ“¦ å®‰è£…

### æ–¹å¼ä¸€ï¼šNapCat æ’ä»¶å¸‚åœº

åœ¨ NapCat WebUI çš„æ’ä»¶ç®¡ç†é¡µé¢æœç´¢"ç­¾åˆ°æ’ä»¶"å¹¶å®‰è£…ã€‚

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…

1. ä» [GitHub Releases](https://github.com/MY-Final/napcat-plugin-checkin/releases) ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
2. è§£å‹åˆ° NapCat çš„ `plugins` ç›®å½•
3. é‡å¯ NapCat æˆ–çƒ­é‡è½½æ’ä»¶

### ä¾èµ–è¯´æ˜

å¦‚éœ€ä½¿ç”¨**å›¾ç‰‡æ‰“å¡åŠŸèƒ½**ï¼Œéœ€è¦å®‰è£… [napcat-plugin-puppeteer](https://github.com/AQiaoYo/napcat-plugin-puppeteer) æ’ä»¶ã€‚
æœ¬æ’ä»¶çš„æ¨¡æ¿ç¼–è¾‘åŠŸèƒ½ä»¿ç…§ Puppeteer æ¸²æŸ“æœåŠ¡è®¾è®¡ã€‚

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºç¡€æŒ‡ä»¤

| æŒ‡ä»¤ | è¯´æ˜ |
|------|------|
| `ç­¾åˆ°` | æ¯æ—¥ç­¾åˆ°ï¼Œè·å¾—éšæœºç§¯åˆ† |
| `#cmd æˆ‘çš„ç§¯åˆ†` | æŸ¥è¯¢ä¸ªäººç­¾åˆ°æ•°æ® |
| `#cmd æ€»æ’è¡Œ` | æŸ¥çœ‹å…¨æœç§¯åˆ†æ’è¡Œæ¦œ |
| `#cmd æ´»è·ƒæ’è¡Œ` | æŸ¥çœ‹å…¨æœæ´»è·ƒæ’è¡Œæ¦œï¼ˆæŒ‰ä½¿ç”¨å¤©æ•°ï¼‰ |
| `#cmd ç§¯åˆ†æ’è¡Œ` | æŸ¥çœ‹ç¾¤å†…æ’è¡Œæ¦œ |
| `#cmd help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |

### ç®¡ç†æŒ‡ä»¤

| æŒ‡ä»¤ | è¯´æ˜ | æƒé™ |
|------|------|------|
| `#cmd å¼€å¯ç­¾åˆ°` | å¼€å¯ç¾¤å†…ç­¾åˆ°åŠŸèƒ½ | ç¾¤ä¸»/ç®¡ç†å‘˜ |
| `#cmd å…³é—­ç­¾åˆ°` | å…³é—­ç¾¤å†…ç­¾åˆ°åŠŸèƒ½ | ç¾¤ä¸»/ç®¡ç†å‘˜ |

### æ’è¡Œæ¦œè¯´æ˜

- **å…¨æœç§¯åˆ†æ’è¡Œ** - å±•ç¤ºæ‰€æœ‰ç¾¤ç”¨æˆ·çš„ç§¯åˆ† TOP100
- **å…¨æœæ´»è·ƒæ’è¡Œ** - å±•ç¤ºä½¿ç”¨å¤©æ•°æœ€å¤šçš„å¿ å®ç”¨æˆ· TOP100
- **ç¾¤å†…æ’è¡Œ** - å±•ç¤ºå½“å‰ç¾¤ç”¨æˆ·çš„ç§¯åˆ†æ’å
- **ç­¾åˆ°åŠ æˆ** - è¿ç»­ç­¾åˆ° 3 å¤©ä»¥ä¸Šæ˜¾ç¤ºæ©™è‰²æ ‡è®°ï¼Œ7 å¤©ä»¥ä¸Šæ˜¾ç¤ºçº¢è‰²æ ‡è®°

## ğŸ¨ WebUI åŠŸèƒ½è¯¦è§£

### ä»ªè¡¨ç›˜
æŸ¥çœ‹æ’ä»¶è¿è¡ŒçŠ¶æ€ã€ä»Šæ—¥å¤„ç†æ¶ˆæ¯æ•°ã€ç´¯è®¡å¤„ç†æ¶ˆæ¯æ•°ç­‰ç»Ÿè®¡ä¿¡æ¯ã€‚

### ä½¿ç”¨è¯´æ˜
- æ’ä»¶åŠŸèƒ½ä»‹ç»
- å¿«é€Ÿå¼€å§‹æŒ‡å—
- å‘½ä»¤åˆ—è¡¨
- æ‰©å±•å¼€å‘æŒ‡å—ï¼ˆç§¯åˆ†å…‘æ¢ç³»ç»Ÿé›†æˆï¼‰
- æ³¨æ„äº‹é¡¹

### ç¾¤ç®¡ç†
- æ˜¾ç¤ºç¾¤å¤´åƒï¼ˆä» QQ æœåŠ¡å™¨è·å–ï¼‰
- æŸ¥çœ‹ç¾¤åç§°ã€ç¾¤å·ã€æˆå‘˜æ•°
- ç¾¤åŠŸèƒ½æ€»å¼€å…³
- ç­¾åˆ°åŠŸèƒ½ç‹¬ç«‹å¼€å…³
- æ‰¹é‡å¯ç”¨/ç¦ç”¨

### ç§¯åˆ†æ’è¡Œ
- æ˜¾ç¤ºå…¨æœç§¯åˆ†æ’è¡Œæ¦œ TOP100
- **ç‚¹å‡»ç”¨æˆ·å¤´åƒ**å¯æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼š
  - ç´¯è®¡ç§¯åˆ†ã€ç­¾åˆ°å¤©æ•°ã€æ´»è·ƒå¤©æ•°
  - è¿ç»­ç­¾åˆ°å¤©æ•°
  - æœ€è¿‘ç­¾åˆ°è®°å½•ï¼ˆæ—¥æœŸã€æ—¶é—´ã€è·å¾—ç§¯åˆ†ã€å½“æ—¥æ’åï¼‰

### æ´»è·ƒæ’è¡Œ
- æŒ‰ä½¿ç”¨å¤©æ•°æ’åºï¼ˆæ¯å¤©é¦–æ¬¡ä½¿ç”¨æœºå™¨äººè®¡1å¤©ï¼‰
- è¯†åˆ«æœ€å¿ å®çš„ç”¨æˆ·
- åŒæ ·æ”¯æŒç‚¹å‡»å¤´åƒæŸ¥çœ‹è¯¦æƒ…

### åˆ†ç¾¤æ’è¡Œ
- å¡ç‰‡å¼ç¾¤é€‰æ‹©å™¨ï¼Œç›´è§‚æ˜¾ç¤ºç¾¤ä¿¡æ¯
- æŸ¥çœ‹å„ç¾¤çš„ç­¾åˆ°æ’è¡Œ
- æ˜¾ç¤ºç¾¤å†…ç§¯åˆ†ã€ç­¾åˆ°æ¬¡æ•°ã€æœ€åç­¾åˆ°æ—¶é—´

### ç­¾åˆ°æ¨¡æ¿
- å¯è§†åŒ– HTML ç¼–è¾‘å™¨
- å®æ—¶é¢„è§ˆæ¨¡æ¿æ•ˆæœ
- ä¸°å¯Œçš„æ¨¡æ¿å˜é‡ï¼š
  - `{{nickname}}` - ç”¨æˆ·æ˜µç§°
  - `{{userId}}` - ç”¨æˆ·QQå·
  - `{{avatarUrl}}` - ç”¨æˆ·å¤´åƒURL
  - `{{earnedPoints}}` - æœ¬æ¬¡è·å¾—ç§¯åˆ†
  - `{{totalPoints}}` - ç´¯è®¡ç§¯åˆ†
  - `{{totalDays}}` - ç´¯è®¡ç­¾åˆ°å¤©æ•°
  - `{{consecutiveDays}}` - è¿ç»­ç­¾åˆ°å¤©æ•°
  - `{{todayRank}}` - ä»Šæ—¥æ’å
  - `{{weekdayName}}` - æ˜ŸæœŸå‡ ï¼ˆä¸­æ–‡ï¼‰
  - `{{isWeekend}}` - æ˜¯å¦å‘¨æœ«
  - `{{groupName}}` - ç¾¤åç§°
  - `{{activeDays}}` - æ´»è·ƒå¤©æ•°
  - `{{basePoints}}` - åŸºç¡€ç§¯åˆ†
  - `{{consecutiveBonus}}` - è¿ç»­ç­¾åˆ°åŠ æˆ
  - `{{weekendBonus}}` - å‘¨æœ«åŠ æˆ
  - `{{quote}}` - éšæœºå¯„è¯­

### æ’è¡Œæ¦œæ¨¡æ¿
- è‡ªå®šä¹‰æ’è¡Œæ¦œå¡ç‰‡æ ·å¼
- æ”¯æŒå‘¨æ¦œã€æœˆæ¦œã€å¹´æ¦œã€æ€»æ¦œå››ç§ç±»å‹
- ç‰¹æ®Šå˜é‡ï¼š
  - `{{typeName}}` - æ’è¡Œæ¦œç±»å‹åç§°ï¼ˆå¦‚"æœ¬å‘¨æ’è¡Œæ¦œ"ï¼‰
  - `{{groupId}}` - ç¾¤ID
  - `{{usersHtml}}` - ç”¨æˆ·åˆ—è¡¨HTMLï¼ˆè‡ªåŠ¨ç”Ÿæˆçš„æ’è¡Œæ¦œåˆ—è¡¨ï¼‰
  - `{{myRankHtml}}` - æˆ‘çš„æ’åHTMLï¼ˆåº•éƒ¨ä¸ªäººçŠ¶æ€æ ï¼‰
  - `{{maxPoints}}` - æœ€é«˜ç§¯åˆ†ï¼ˆç”¨äºè¿›åº¦æ¡è®¡ç®—ï¼‰

### æ¥å£æ–‡æ¡£
å®Œæ•´çš„ API æ–‡æ¡£ï¼ŒåŒ…å«ï¼š
- ç­¾åˆ°ç›¸å…³æ¥å£
- æ’è¡Œç›¸å…³æ¥å£
- ç§¯åˆ†ç®¡ç†æ¥å£ï¼ˆCRUDï¼‰
- æ¨¡æ¿é¢„è§ˆæ¥å£
- ç­¾åˆ°æ—¥å¿—æŸ¥è¯¢æ¥å£

### ç­¾åˆ°æ—¥å¿—
å®Œæ•´çš„ç­¾åˆ°è®°å½•è¿½è¸ªåŠŸèƒ½ï¼š
- **ç­¾åˆ°è®°å½•æŸ¥è¯¢** - æ”¯æŒæŒ‰ç”¨æˆ·ã€ç¾¤ç»„ã€æ—¶é—´èŒƒå›´ç­›é€‰
- **ç­¾åˆ°ç»Ÿè®¡** - ç»Ÿè®¡æˆåŠŸç‡ã€æ€»ç§¯åˆ†ã€ç”¨æˆ·æ•°ã€ç¾¤ç»„æ•°
- **æ¯æ—¥è¶‹åŠ¿** - æŸ¥çœ‹è¿‘30å¤©ç­¾åˆ°æƒ…å†µ
- **æ—¥å¿—é…ç½®** - æ”¯æŒæŒ‰ç¾¤å¼€å…³æ—¥å¿—ã€è®¾ç½®ä¿ç•™å¤©æ•°
- **è‡ªåŠ¨æ¸…ç†** - è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ—¥å¿—ï¼ˆé»˜è®¤90å¤©ï¼‰
- **æ‰‹åŠ¨æ¸…ç†** - æ”¯æŒæ‰‹åŠ¨æ¸…ç†æŒ‡å®šå¤©æ•°å‰çš„æ—¥å¿—

### æ´»è·ƒå¤©æ•°ç»Ÿè®¡
- **æ´»è·ƒå®šä¹‰** - æ¯å¤©é¦–æ¬¡ä½¿ç”¨æœºå™¨äººè®¡1å¤©æ´»è·ƒ
- **å¤šç¾¤å»é‡** - ç”¨æˆ·åœ¨å¤šä¸ªç¾¤ç­¾åˆ°åªç®—1å¤©æ´»è·ƒ
- **å¿ å®ç”¨æˆ·è¯†åˆ«** - æ´»è·ƒå¤©æ•°è¶Šå¤šï¼Œç”¨æˆ·è¶Šå¿ å®

## âš™ï¸ é…ç½®é¡¹

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| å‘½ä»¤å‰ç¼€ | è§¦å‘å‘½ä»¤çš„å‰ç¼€ | `#cmd` |
| å†·å´æ—¶é—´ | ç¾¤èŠç­¾åˆ°å†·å´æ—¶é—´ï¼ˆç§’ï¼‰ | 60 |
| æœ€å°ç­¾åˆ°ç§¯åˆ† | å•æ¬¡ç­¾åˆ°æœ€å°‘è·å¾—ç§¯åˆ† | 10 |
| æœ€å¤§ç­¾åˆ°ç§¯åˆ† | å•æ¬¡ç­¾åˆ°æœ€å¤šè·å¾—ç§¯åˆ† | 50 |
| è¿ç»­ç­¾åˆ°åŠ æˆ | æ¯å¤©é¢å¤–å¢åŠ çš„ç§¯åˆ† | 2 |
| æœ€å¤§åŠ æˆä¸Šé™ | è¿ç»­ç­¾åˆ°åŠ æˆçš„ä¸Šé™ | 20 |
| å‘¨æœ«åŠ æˆ | å‘¨æœ«é¢å¤–ç§¯åˆ† | 5 |
| ç­¾åˆ°å‘½ä»¤ | è§¦å‘ç­¾åˆ°çš„å‘½ä»¤åˆ—è¡¨ | ç­¾åˆ°,æ‰“å¡,sign,checkin |

## ğŸ”Œ API æ¥å£

### ç§¯åˆ†ç®¡ç†æ¥å£ç¤ºä¾‹

```typescript
// æŸ¥è¯¢ç”¨æˆ·ç§¯åˆ†
const res = await fetch('/plugin/napcat-plugin-checkin/api/checkin/groups/123456/users/1150880493/points');
const data = await res.json();

// æ‰£é™¤ç§¯åˆ†ï¼ˆå…‘æ¢å¥–åŠ±ï¼‰
const result = await fetch('/plugin/napcat-plugin-checkin/api/checkin/groups/123456/users/1150880493/points', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    points: -100,  // æ‰£é™¤100ç§¯åˆ†
    description: 'å…‘æ¢å¥–åŠ±-ç²¾ç¾å¤´åƒæ¡†',
    type: 'exchange'
  })
});
```

### ç­¾åˆ°æ—¥å¿—æ¥å£ç¤ºä¾‹

```typescript
// æŸ¥è¯¢ç­¾åˆ°æ—¥å¿—ï¼ˆåˆ†é¡µï¼‰
const logsRes = await fetch('/plugin/napcat-plugin-checkin/api/logs?page=1&pageSize=50&status=success');
const logsData = await logsRes.json();

// è·å–æ—¥å¿—ç»Ÿè®¡
const statsRes = await fetch('/plugin/napcat-plugin-checkin/api/logs/stats?timeRange=week');
const statsData = await statsRes.json();

// è·å–æ¯æ—¥è¶‹åŠ¿
const trendRes = await fetch('/plugin/napcat-plugin-checkin/api/logs/trend?days=30');
const trendData = await trendRes.json();

// è·å–ç”¨æˆ·ç­¾åˆ°æ—¥å¿—
const userLogsRes = await fetch('/plugin/napcat-plugin-checkin/api/logs/users/123456');
const userLogsData = await userLogsRes.json();

// è·å–ç¾¤ç»„ç­¾åˆ°æ—¥å¿—
const groupLogsRes = await fetch('/plugin/napcat-plugin-checkin/api/logs/groups/987654');
const groupLogsData = await groupLogsRes.json();

// è·å–å•æ¡æ—¥å¿—è¯¦æƒ…
const logDetailRes = await fetch('/plugin/napcat-plugin-checkin/api/logs/log-xxx');
const logDetailData = await logDetailRes.json();

// æ›´æ–°ç¾¤æ—¥å¿—é…ç½®
await fetch('/plugin/napcat-plugin-checkin/api/logs/config/987654', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    enabled: true,
    enableStats: true,
    retentionDays: 90
  })
});

// æ¸…ç†è¿‡æœŸæ—¥å¿—
await fetch('/plugin/napcat-plugin-checkin/api/logs/cleanup?days=30', {
  method: 'POST'
});
```

### æ’è¡Œæ¦œæ•°æ®æ¥å£ç¤ºä¾‹

```typescript
// è·å–ç¾¤æ’è¡Œæ¦œï¼ˆæ”¯æŒ week/month/year/allï¼‰
const leaderboardRes = await fetch('/plugin/napcat-plugin-checkin/api/leaderboard/123456?type=week');
const leaderboardData = await leaderboardRes.json();
```

### ç”¨æˆ·æ•°æ®æ¥å£ç¤ºä¾‹

```typescript
// è·å–ç”¨æˆ·åˆ†ç¾¤ä½™é¢è¯¦æƒ…
const balanceRes = await fetch('/plugin/napcat-plugin-checkin/api/checkin/user/123456/balance');
const balanceData = await balanceRes.json();

// è·å–æ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼ˆç®¡ç†ç”¨ï¼‰
const usersRes = await fetch('/plugin/napcat-plugin-checkin/api/checkin/users');
const usersData = await usersRes.json();
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
napcat-plugin-checkin/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # æ’ä»¶å…¥å£ï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°
â”‚   â”œâ”€â”€ config.ts             # é…ç½®å®šä¹‰å’Œ WebUI Schema
â”‚   â”œâ”€â”€ types.ts              # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ CHANGELOG.md          # æ›´æ–°æ—¥å¿—
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ state.ts          # å…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆå«æ•°æ®ä¿æŠ¤ï¼‰
â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”œâ”€â”€ message-handler.ts    # æ¶ˆæ¯å¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ checkin-handler.ts    # ç­¾åˆ°å¤„ç†å™¨
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api-service.ts        # WebUI API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ checkin-service.ts    # ç­¾åˆ°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ points-calculator.ts  # ç§¯åˆ†è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ log-service.ts        # ç­¾åˆ°æ—¥å¿—æœåŠ¡
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ checkin-messages.ts   # éšæœºå¯„è¯­
â”‚   â””â”€â”€ webui/                # React SPA å‰ç«¯
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ components/
â”‚       â”‚   â”‚   â””â”€â”€ UserDetailModal.tsx  # ç”¨æˆ·è¯¦æƒ…å¼¹çª—
â”‚       â”‚   â”œâ”€â”€ pages/
â”‚       â”‚   â”‚   â”œâ”€â”€ StatusPage.tsx       # ä»ªè¡¨ç›˜
â”‚       â”‚   â”‚   â”œâ”€â”€ HelpPage.tsx         # ä½¿ç”¨è¯´æ˜
â”‚       â”‚   â”‚   â”œâ”€â”€ ConfigPage.tsx       # é…ç½®é¡µé¢
â”‚       â”‚   â”‚   â”œâ”€â”€ GroupsPage.tsx       # ç¾¤ç®¡ç†
â”‚       â”‚   â”‚   â”œâ”€â”€ PointsRankingPage.tsx    # ç§¯åˆ†æ’è¡Œ
â”‚       â”‚   â”‚   â”œâ”€â”€ ActiveRankingPage.tsx    # æ´»è·ƒæ’è¡Œ
â”‚       â”‚   â”‚   â”œâ”€â”€ CheckinDataPage.tsx      # åˆ†ç¾¤æ’è¡Œ
â”‚       â”‚   â”‚   â”œâ”€â”€ LogPage.tsx              # ç­¾åˆ°æ—¥å¿—
â”‚       â”‚   â”‚   â”œâ”€â”€ TemplatePage.tsx         # æ¨¡æ¿ç¼–è¾‘
â”‚       â”‚   â”‚   â””â”€â”€ ApiDocsPage.tsx          # æ¥å£æ–‡æ¡£
â”‚       â”‚   â””â”€â”€ ...
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ README.md
```

## ğŸ’» å¼€å‘

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- pnpm 8+
- NapCat 4.14.0+

### å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
pnpm run dev

# æ„å»º
pnpm run build

# éƒ¨ç½²åˆ° NapCat
pnpm run deploy
```

### å‘½ä»¤è¯´æ˜

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `pnpm run dev` | å¼€å‘æ¨¡å¼ï¼Œç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨æ„å»ºå¹¶çƒ­é‡è½½ |
| `pnpm run build` | æ„å»ºç”Ÿäº§ç‰ˆæœ¬ |
| `pnpm run deploy` | æ„å»ºå¹¶è‡ªåŠ¨éƒ¨ç½²åˆ° NapCat |
| `pnpm run build:webui` | ä»…æ„å»º WebUI å‰ç«¯ |
| `pnpm run dev:webui` | WebUI å¼€å‘æœåŠ¡å™¨ï¼ˆå®æ—¶é¢„è§ˆï¼‰ |

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**: TypeScript + Vite
- **WebUI æ¡†æ¶**: React 18 + TypeScript
- **UI æ ·å¼**: TailwindCSS
- **æ„å»ºå·¥å…·**: Vite
- **æ’ä»¶æ¡†æ¶**: NapCat

## ğŸ“± ç•Œé¢é¢„è§ˆ

### WebUI ç®¡ç†é¢æ¿
- ä»ªè¡¨ç›˜ï¼šæ’ä»¶çŠ¶æ€æ¦‚è§ˆ
- ç¾¤ç®¡ç†ï¼šç¾¤å¤´åƒæ˜¾ç¤ºã€å¼€å…³æ§åˆ¶
- ç§¯åˆ†æ’è¡Œï¼šç‚¹å‡»å¤´åƒæŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…
- æ´»è·ƒæ’è¡Œï¼šè¯†åˆ«å¿ å®ç”¨æˆ·
- åˆ†ç¾¤æ’è¡Œï¼šå¡ç‰‡å¼ç¾¤é€‰æ‹©å™¨
- æ¨¡æ¿ç¼–è¾‘ï¼šå¯è§†åŒ–ç¼–è¾‘ + å®æ—¶é¢„è§ˆ

## ğŸ¤ åé¦ˆä¸æ”¯æŒ

- **QQç¾¤**: [1072957415](http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&k=myZ-6WbZkavmF1KWGNdTQ8SpbVAi_hjY&authKey=qytWUv7F5XBh18%2FbyLreigwR3QzfSh9nKPu3anwOdcoOqPyzZOavROvPNGdLmq8V&noverify=0&group_code=1072957415)
- **GitHub**: [@MY-Final](https://github.com/MY-Final)
- **Issues**: [æäº¤é—®é¢˜](https://github.com/MY-Final/napcat-plugin-checkin/issues)

## ğŸ“ æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ [CHANGELOG.md](CHANGELOG.md) è·å–è¯¦ç»†çš„ç‰ˆæœ¬æ›´æ–°å†å²ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ æ„Ÿè°¢

- [NapCat](https://github.com/NapNeko/NapCat) - QQ æœºå™¨äººæ¡†æ¶
- [TailwindCSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [React](https://react.dev/) - å‰ç«¯æ¡†æ¶